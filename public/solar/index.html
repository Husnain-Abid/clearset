<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planet Explorer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #020617;
            /* Slate 950 */
            overflow: hidden;
            margin: 0;
            color: #e2e8f0;
        }

        /* Custom Scrollbar for the bottom nav */
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .planet-nav-item.active {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
        }

        canvas {
            display: block;
            outline: none;
        }

        /* Subtle glowing text */
        .glow-text {
            text-shadow: 0 0 20px rgba(56, 189, 248, 0.5);
        }
    </style>

</head>

<body class="h-screen w-full relative select-none text-slate-200 antialiased">

    <!-- 3D Canvas Container -->
    <div id="canvas-container" class="absolute inset-0 z-0"></div>

    <!-- Side Panel (Planet Detail) -->

    <!-- Side Panel (Service Detail) -->
    <aside id="planet-panel"
        class="absolute top-24 right-6 z-40 w-80 glass-panel rounded-2xl p-6 translate-x-96 transition-transform duration-500 ease-out opacity-0 pointer-events-auto flex flex-col gap-4">
        <div class="flex justify-between items-start">
            <div>
                <h2 id="panel-title" class="text-3xl font-medium tracking-tight text-white mb-1">Service Name</h2>
                <p id="panel-subtitle" class="text-sm font-medium tracking-tight" style="color: #00e6b8;">Service
                    Category</p>
            </div>
            <button id="close-panel" class="text-slate-400 hover:text-white transition-colors">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>



        <div class="space-y-2">
            <h3 class="text-xs font-medium uppercase tracking-wider text-slate-500">Description</h3>
            <p id="panel-fact" class="text-sm text-slate-300 leading-relaxed">Service description goes here.</p>
        </div>


    </aside>




    <!-- Bottom Controls & Nav -->
    <div class="absolute bottom-8 left-6 right-6 z-50 flex flex-col gap-4 pointer-events-none">

        <!-- Service Navigation List -->
        <div class="w-full overflow-x-auto hide-scrollbar pointer-events-auto pb-2">
            <div class="flex justify-center min-w-max px-4 gap-3" id="planet-list">
                <!-- Dynamically populated by JS -->
            </div>
        </div>

    </div>









    <!-- Overlay for loading -->
    <div id="loader"
        class="absolute inset-0 z-[60] bg-slate-950 flex items-center justify-center flex-col gap-4 transition-opacity duration-1000">
        <div class="w-12 h-12 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin"></div>
        <p class="text-sm font-medium tracking-tight text-slate-400 animate-pulse">Initializing Space Engine...</p>
    </div>




    <div id="planet-tooltip"
        style="position: fixed; left: 712px; top: 582px; background: rgba(0, 230, 184, 0.1); border: 1px solid rgba(0, 230, 184, 0.3); padding: 8px 12px; border-radius: 6px; color: rgb(235, 253, 250); font-size: 12px; font-weight: 500; pointer-events: none; z-index: 30; white-space: nowrap; backdrop-filter: blur(8px);">
    </div>



    <script>

        // Initialize Lucide Icons
        lucide.createIcons();

        // Data: Solar System
const planetsData = [
    {
        name: "Clearset",
        color: 0x00E6B8,
        size: 14,
        distance: 0,
        speed: 0,
        desc: "Your trusted partner in innovation and digital transformation. We design, build, and scale intelligent digital solutions that empower businesses to grow faster and smarter.",
        category: "Core Brand",
        power: "N/A",
        type: "Company Hub",
        capability: 100,
        isCenter: true
    },
    {
        name: "Machine Learning",
        color: 0x00E6B8,
        size: 3.5,
        distance: 35,
        speed: 0.015,
        desc: "Advanced machine learning models built for real-world business problems. We enable automation, prediction, and data-driven decision making at scale.",
        category: "AI Services",
        power: "Ultra",
        type: "Service",
        capability: 92
    },
    {
        name: "NLP Solutions",
        color: 0x38BDF8, // Sky Blue
        size: 3.2,
        distance: 50,
        speed: 0.012,
        desc: "Natural Language Processing solutions for understanding human language. From chatbots to sentiment analysis, we turn text into actionable insights.",
        category: "AI Services",
        power: "Ultra",
        type: "Service",
        capability: 88
    },
    {
        name: "Mobile Development",
        color: 0x22C55E, // Emerald Green
        size: 3.8,
        distance: 68,
        speed: 0.009,
        desc: "High-performance mobile applications for iOS and Android platforms. We focus on scalability, smooth user experience, and long-term maintainability.",
        category: "Development",
        power: "High",
        type: "Service",
        capability: 85
    },
    {
        name: "Cloud Engineering",
        color: 0xF59E0B, // Amber
        size: 4.2,
        distance: 85,
        speed: 0.007,
        desc: "Robust cloud infrastructure designed for reliability and scale. We specialize in DevOps, automation, and secure cloud-native architectures.",
        category: "Infrastructure",
        power: "Ultra",
        type: "Service",
        capability: 90
    },
    {
        name: "SaaS Solutions",
        color: 0x6366F1, // Indigo Blue
        size: 3.6,
        distance: 105,
        speed: 0.006,
        desc: "End-to-end SaaS product development from idea to launch. We build scalable, multi-tenant platforms optimized for growth and performance.",
        category: "Development",
        power: "High",
        type: "Service",
        capability: 87
    },
    {
        name: "AI Consultancy",
        color: 0x06B6D4, // Cyan
        size: 3.4,
        distance: 125,
        speed: 0.005,
        desc: "Strategic AI consulting to guide digital transformation journeys. We help businesses adopt AI responsibly with measurable business impact.",
        category: "Advisory",
        power: "Ultra",
        type: "Service",
        capability: 89
    },
    {
        name: "Call Center Tech",
        color: 0x14B8A6, // Teal Green
        size: 3.9,
        distance: 150,
        speed: 0.004,
        desc: "Smart call center technologies powered by AI automation. Improve customer experience with intelligent routing, analytics, and voice solutions.",
        category: "Contact Center",
        power: "High",
        type: "Service",
        capability: 86
    }
];


        // Three.js Setup
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x020617, 0.002); // Deep space fog

        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 60, 120);
        camera.lookAt(0, 0, 0);


        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();


        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        let isHoveringPlanet = false;

        const tooltip = document.getElementById('planet-tooltip');

        // Lighting
        const ambientLight = new THREE.AmbientLight(0x404040, 1.5); // Soft white light
        scene.add(ambientLight);

        const pointLight = new THREE.PointLight(0xFFFFFF, 2, 300); // Sun light
        scene.add(pointLight);

        // Starfield
        const starsGeometry = new THREE.BufferGeometry();
        const starsCount = 3000;
        const posArray = new Float32Array(starsCount * 3);
        for (let i = 0; i < starsCount * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 500;
        }
        starsGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const starsMaterial = new THREE.PointsMaterial({ size: 0.7, color: 0xffffff, transparent: true, opacity: 0.8 });
        const starMesh = new THREE.Points(starsGeometry, starsMaterial);
        scene.add(starMesh);


        async function createSunSprite(planet, sunMesh) {
            await document.fonts.load('bold 380px Inter');

            const canvas = document.createElement('canvas');
            canvas.width = 512;
            canvas.height = 512;
            const ctx = canvas.getContext("2d");

            ctx.font = "bold 380px Inter";
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            ctx.fillStyle = "#070b1c";
            // ctx.fillText("C", canvas.width / 2, canvas.height / 2);

            const texture = new THREE.CanvasTexture(canvas);

            const sprite = new THREE.Sprite(
                new THREE.SpriteMaterial({
                    map: texture,
                    transparent: true,
                    depthTest: false
                })
            );

            sprite.scale.set(planet.size * 2.8, planet.size * 2.8, 1);
            sprite.position.set(-1, 0, 3);

            // ðŸ”’ LOCK rotation completely
            sprite.onBeforeRender = () => {
                sprite.quaternion.copy(camera.quaternion);
                sprite.rotation.z = 0;
            };

            sunMesh.add(sprite); // âœ… CHILD OF SUN
        }

        // ===================================================
        // SERVICE ICON CREATION
        // ===================================================
        /**
         * Creates a 3D service icon using geometric primitives
         * Each service gets a unique symbolic representation
         */
        function createServiceIcon(name, color, size) {
            const iconGroup = new THREE.Group();

            // Base icon shape (varies by service)
            let iconGeometry;
            let iconMaterial = new THREE.MeshPhongMaterial({
                color: color,
                emissive: color,
                emissiveIntensity: 0.4,
                shininess: 100
            });

            switch (name) {
                case "Machine Learning":
                    // Octahedron for ML
                    iconGeometry = new THREE.OctahedronGeometry(size * 0.7, 1);
                    break;
                case "NLP Solutions":
                    // Torus for communication/language
                    const mesh = new THREE.Mesh(new THREE.TorusGeometry(size * 0.6, size * 0.2, 16, 100), iconMaterial);
                    iconGroup.add(mesh);
                    return iconGroup;
                case "Mobile Development":
                    // Box for mobile devices
                    iconGeometry = new THREE.BoxGeometry(size * 0.5, size * 1.2, size * 0.3);
                    break;
                case "Cloud Engineering":
                    // Dodecahedron for cloud/distribution
                    iconGeometry = new THREE.DodecahedronGeometry(size * 0.65, 0);
                    break;
                case "SaaS Solutions":
                    // Icosahedron for complex structures
                    iconGeometry = new THREE.IcosahedronGeometry(size * 0.7, 1);
                    break;
                case "AI Consultancy":
                    // Tetrahedron for core/foundation
                    iconGeometry = new THREE.TetrahedronGeometry(size * 0.8, 0);
                    break;
                case "Call Center Tech":
                    // Cone for broadcasting/communication
                    iconGeometry = new THREE.ConeGeometry(size * 0.7, size * 1.4, 32);
                    break;
                default:
                    iconGeometry = new THREE.BoxGeometry(size, size, size);
            }

            const iconMesh = new THREE.Mesh(iconGeometry, iconMaterial);
            iconGroup.add(iconMesh);

            // Add subtle glow sphere around icon
            const glowGeometry = new THREE.SphereGeometry(size * 1.3, 16, 16);
            const glowMaterial = new THREE.MeshBasicMaterial({
                color: color,
                transparent: true,
                opacity: 0.15,
                side: THREE.BackSide
            });
            const glowMesh = new THREE.Mesh(glowGeometry, glowMaterial);
            iconGroup.add(glowMesh);

            return iconGroup;
        }






        // Planet Mesh Generation
        const planetMeshes = [];
        const orbitLines = [];


        planetsData.forEach((planet, index) => {

            let object;

            if (index === 0) {
                const centerGeometry = new THREE.SphereGeometry(planet.size, 64, 64);
                const centerMaterial = new THREE.MeshPhongMaterial({
                    color: planet.color,
                    emissive: planet.color,
                    emissiveIntensity: 0.6,
                    shininess: 150
                });

                const sunMesh = new THREE.Mesh(centerGeometry, centerMaterial);
                scene.add(sunMesh);

                const glowGeo = new THREE.SphereGeometry(planet.size * 1.3, 32, 32);
                const glowMat = new THREE.MeshBasicMaterial({
                    color: planet.color,
                    transparent: true,
                    opacity: 0.25,
                    side: THREE.BackSide
                });
                sunMesh.add(new THREE.Mesh(glowGeo, glowMat));

                createSunSprite(planet, sunMesh);

                object = sunMesh; // âœ… THIS WAS MISSING
            }
            else {
                object = createServiceIcon(planet.name, planet.color, planet.size);

                const orbitGeo = new THREE.RingGeometry(
                    planet.distance - 0.2,
                    planet.distance + 0.2,
                    128
                );
                const orbitMat = new THREE.MeshBasicMaterial({
                    color: 0xffffff,
                    opacity: 0.05,
                    transparent: true,
                    side: THREE.DoubleSide
                });

                const orbit = new THREE.Mesh(orbitGeo, orbitMat);
                orbit.rotation.x = Math.PI / 2;
                scene.add(orbit);
            }

            // âœ… Safe now
            object.userData = {
                ...planet,
                id: index,
                angle: Math.random() * Math.PI * 2,
                isHovered: false
            };

            scene.add(object);
            planetMeshes.push(object);
        });


        // Animation State

        let focusTarget = null;

        // Setup UI


        const planetListEl = document.getElementById('planet-list');

        // Create navigation buttons
        planetsData.forEach((planet, index) => {
            const btn = document.createElement('button');
            btn.className = `planet-nav-item glass-panel px-4 py-2 rounded-xl flex items-center gap-3 hover:bg-white/10 transition-all group min-w-[160px] border border-transparent`;

            btn.innerHTML = `
                                <div 
                                    class="w-3 h-3 rounded-full flex-shrink-0"
                                    style="background-color: #${planet.color.toString(16).padStart(6, '0')}"
                                ></div>

                                <div class="text-left">
                                    <div class="text-xs font-medium text-slate-200 group-hover:text-white">
                                        ${planet.name}
                                    </div>
                                    <div class="text-[10px] text-slate-400">
                                        ${planet.category}
                                    </div>
                                </div>
                            `;


            btn.onclick = () => focusOnPlanet(index);

            planetListEl.appendChild(btn);
        });




        lucide.createIcons();


        // Functions
        function focusOnPlanet(index) {
            focusTarget = index;
            const planet = planetMeshes[index];
            const data = planetsData[index];

            // Update Active State in UI
            document.querySelectorAll('.planet-nav-item').forEach((el, i) => {
                if (i === index) el.classList.add('active', 'border-white/20');
                else el.classList.remove('active', 'border-white/20');
            });

            // Move Camera
            const offset = index === 0 ? 40 : 20; // Distance from planet
            const duration = 1.5;

            // If looking at sun, fixed position, else dynamic calculation in loop
            if (index === 0) {
                gsap.to(camera.position, {
                    x: 0, y: 30, z: 60,
                    duration: duration,
                    onUpdate: () => camera.lookAt(0, 0, 0)
                });
            }

            // Show Info Panel
            const panel = document.getElementById('planet-panel');

            // Text Updates
            document.getElementById('panel-title').innerText = data.name;
            document.getElementById('panel-subtitle').innerText = data.type;
            document.getElementById('panel-fact').innerText = data.desc;

            // Animation slide in
            panel.classList.remove('translate-x-96', 'opacity-0');
        }

        document.getElementById('close-panel').onclick = () => {
            focusTarget = null;
            document.getElementById('planet-panel').classList.add('translate-x-96', 'opacity-0');

            // Reset View
            gsap.to(camera.position, {
                x: 0, y: 60, z: 120,
                duration: 2,
                onUpdate: () => camera.lookAt(0, 0, 0)
            });

            document.querySelectorAll('.planet-nav-item').forEach(el => el.classList.remove('active', 'border-white/20'));
        };

        // Animation Loop
        function animate() {
            requestAnimationFrame(animate);


            planetMeshes.forEach((mesh, index) => {

                // Sun rotation
                if (index === 0) {
                    // mesh.rotation.y += 0.003;
                    return;
                }

                const data = mesh.userData;

                // Orbit movement

                if (!data.isHovered) {
                    data.angle += data.speed;
                }


                const x = Math.cos(data.angle) * data.distance;
                const z = Math.sin(data.angle) * data.distance;

                // Floating effect (time based)
                const floatY = Math.sin(Date.now() * 0.002 + index) * 1.2;

                mesh.position.set(x, floatY, z);
            });




            // Camera Tracking if Locked
            if (focusTarget !== null && focusTarget !== 0) {
                const targetMesh = planetMeshes[focusTarget];
                const targetOffset = 20; // Zoom distance

                // Smoothly follow the planet
                const idealX = targetMesh.position.x;
                const idealZ = targetMesh.position.z + targetOffset;
                const idealY = 10;

                // Simple linear interpolation (lerp) for smooth camera follow
                camera.position.x += (idealX - camera.position.x) * 0.05;
                camera.position.z += (idealZ - camera.position.z) * 0.05;
                camera.position.y += (idealY - camera.position.y) * 0.05;

                camera.lookAt(targetMesh.position);
            } else if (focusTarget === null) {
                // Idle rotation of entire system slightly
                if (!isHoveringPlanet) {
                    scene.rotation.y += 0.0005;
                }
            }

            renderer.render(scene, camera);
        }

        // Click Handling
        renderer.domElement.addEventListener('click', onPlanetClick);

        function onPlanetClick(event) {
            // Mouse position normalize (-1 to +1)
            const rect = renderer.domElement.getBoundingClientRect();
            mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
            mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);

            // Sirf planet meshes check karo
            const intersects = raycaster.intersectObjects(planetMeshes, true);

            if (intersects.length > 0) {
                const clickedObject = intersects[0].object;

                // Sprite ya child object ho sakta hai
                const planetMesh = clickedObject.parent.userData?.id !== undefined
                    ? clickedObject.parent
                    : clickedObject;

                if (planetMesh.userData && planetMesh.userData.id !== undefined) {
                    focusOnPlanet(planetMesh.userData.id);
                }
            }
        }

        renderer.domElement.addEventListener('mousemove', onPlanetHover);

        function onPlanetHover(event) {
            const rect = renderer.domElement.getBoundingClientRect();

            mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
            mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);

            const intersects = raycaster.intersectObjects(planetMeshes, true);

            // ðŸ”´ Reset all hover states
            planetMeshes.forEach(mesh => {
                if (mesh.userData) mesh.userData.isHovered = false;
            });

            if (intersects.length > 0) {
                const hoveredObject = intersects[0].object;

                const planetMesh = hoveredObject.parent.userData?.id !== undefined
                    ? hoveredObject.parent
                    : hoveredObject;

                if (planetMesh.userData) {
                    planetMesh.userData.isHovered = true; // âœ… ONLY THIS PLANET PAUSED

                    renderer.domElement.style.cursor = 'pointer';

                    tooltip.textContent = planetMesh.userData.name;
                    tooltip.style.left = event.clientX + 12 + 'px';
                    tooltip.style.top = event.clientY + 12 + 'px';
                    tooltip.style.opacity = '1';
                }
            } else {
                renderer.domElement.style.cursor = 'default';
                tooltip.style.opacity = '0';
            }
        }




        // Start
        animate();

        // Loading Screen Removal
        window.onload = () => {
            setTimeout(() => {
                const loader = document.getElementById('loader');
                loader.style.opacity = '0';
                setTimeout(() => loader.remove(), 100);
            }, 300);
        };

        // Handle Resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

    </script>





</body>

</html>